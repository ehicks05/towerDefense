<project name="ericTD" default="build">
    <target name="build">

        <!-- Clean out the build destination directory -->
        <delete dir="out"/>
        <mkdir dir="out"/>
        <mkdir dir="out/classes"/>
        <mkdir dir="out/LeaderboardServer/classes"/>

        <!-- Clean out any windows thumbs.db files from the source tree -->
        <delete>
            <fileset dir="ass" includes="**/Thumbs.db"/>
        </delete>

        <!-- Compile Java -->
        <javac srcdir="src" destdir="out/classes" debug="true" includeantruntime="false">
            <classpath>
                <pathelement location="C:/javalib/jave-1.0.2/jave-1.0.2.jar"/>
            </classpath>
        </javac>

        <javac srcdir="LeaderboardServer/src" destdir="out/LeaderboardServer/classes" debug="true" includeantruntime="false"/>

        <!-- Build Jars -->
        <mkdir dir="out/jar"/>
        <jar destfile="out/jar/ericTD.jar" basedir="out/classes">
            <manifest>
                <attribute name="Main-Class" value="hicks.td.GameCanvas"/>
                <attribute name="Class-Path" value="lib/jl1.0.1.jar lib/artemis.jar lib/jflac-1.3.jar lib/jave-1.0.2.jar"/>
            </manifest>
        </jar>
        <jar destfile="out/jar/leaderboardDaemon.jar" basedir="out/LeaderboardServer/classes">
            <manifest>
                <attribute name="Main-Class" value="hicks.td.net.LeaderBoardServer"/>
            </manifest>
        </jar>

        <!-- Copy required 3rd party JARs -->
        <copy file="C:/javalib/jave-1.0.2/jave-1.0.2.jar" todir="out/jar/lib"/>

        <!-- Copy art assets to the target directory -->
        <copy todir="out/jar/ass">
            <fileset dir="ass"/>
        </copy>

        <!-- Copy data files to the target directory -->
        <copy todir="out/jar/data">
            <fileset dir="data"/>
        </copy>

        <zip destfile="out/erictd.zip" basedir="out/jar"/>

    </target>
</project>